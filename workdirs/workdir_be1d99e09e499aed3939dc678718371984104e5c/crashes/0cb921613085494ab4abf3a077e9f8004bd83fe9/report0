INFO: task kworker/1:2:71 blocked for more than 143 seconds.
      Not tainted 5.19.0-rc1-syzkaller #0
"echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.
task:kworker/1:2     state:D stack:24896 pid:   71 ppid:     2 flags:0x00004000
Workqueue: usb_hub_wq hub_event
Call Trace:
 <TASK>
 context_switch root/ramdisk/work_dir/linux/kernel/sched/core.c:5116 [inline]
 __schedule+0xb00/0x2620 root/ramdisk/work_dir/linux/kernel/sched/core.c:6428
 schedule+0xdb/0x200 root/ramdisk/work_dir/linux/kernel/sched/core.c:6500
 schedule_preempt_disabled+0xf/0x20 root/ramdisk/work_dir/linux/kernel/sched/core.c:6559
 __mutex_lock_common root/ramdisk/work_dir/linux/kernel/locking/mutex.c:679 [inline]
 __mutex_lock+0x910/0x12d0 root/ramdisk/work_dir/linux/kernel/locking/mutex.c:747
 add_early_randomness+0x1a/0x170 root/ramdisk/work_dir/linux/drivers/char/hw_random/core.c:69
 hwrng_register+0x36a/0x4f0 root/ramdisk/work_dir/linux/drivers/char/hw_random/core.c:599
 chaoskey_probe+0x76c/0xc40 root/ramdisk/work_dir/linux/drivers/usb/misc/chaoskey.c:205
 usb_probe_interface+0x30d/0x7d0 root/ramdisk/work_dir/linux/drivers/usb/core/driver.c:396
 call_driver_probe root/ramdisk/work_dir/linux/drivers/base/dd.c:555 [inline]
 really_probe+0x22a/0xb80 root/ramdisk/work_dir/linux/drivers/base/dd.c:634
 __driver_probe_device+0x337/0x4d0 root/ramdisk/work_dir/linux/drivers/base/dd.c:764
 driver_probe_device+0x4c/0x1a0 root/ramdisk/work_dir/linux/drivers/base/dd.c:794
 __device_attach_driver+0x202/0x2f0 root/ramdisk/work_dir/linux/drivers/base/dd.c:917
 bus_for_each_drv+0x155/0x1d0 root/ramdisk/work_dir/linux/drivers/base/bus.c:427
 __device_attach+0x1e8/0x530 root/ramdisk/work_dir/linux/drivers/base/dd.c:989
 bus_probe_device+0x1e4/0x290 root/ramdisk/work_dir/linux/drivers/base/bus.c:487
 device_add+0xcb6/0x2150 root/ramdisk/work_dir/linux/drivers/base/core.c:3417
 usb_set_configuration+0xf91/0x19b0 root/ramdisk/work_dir/linux/drivers/usb/core/message.c:2170
 usb_generic_driver_probe+0xb4/0xf0 root/ramdisk/work_dir/linux/drivers/usb/core/generic.c:238
 usb_probe_device+0xdb/0x2c0 root/ramdisk/work_dir/linux/drivers/usb/core/driver.c:293
 call_driver_probe root/ramdisk/work_dir/linux/drivers/base/dd.c:555 [inline]
 really_probe+0x22a/0xb80 root/ramdisk/work_dir/linux/drivers/base/dd.c:634
 __driver_probe_device+0x337/0x4d0 root/ramdisk/work_dir/linux/drivers/base/dd.c:764
 driver_probe_device+0x4c/0x1a0 root/ramdisk/work_dir/linux/drivers/base/dd.c:794
 __device_attach_driver+0x202/0x2f0 root/ramdisk/work_dir/linux/drivers/base/dd.c:917
 bus_for_each_drv+0x155/0x1d0 root/ramdisk/work_dir/linux/drivers/base/bus.c:427
 __device_attach+0x1e8/0x530 root/ramdisk/work_dir/linux/drivers/base/dd.c:989
 bus_probe_device+0x1e4/0x290 root/ramdisk/work_dir/linux/drivers/base/bus.c:487
 device_add+0xcb6/0x2150 root/ramdisk/work_dir/linux/drivers/base/core.c:3417
 usb_new_device.cold+0x660/0x10e5 root/ramdisk/work_dir/linux/drivers/usb/core/hub.c:2566
 hub_port_connect root/ramdisk/work_dir/linux/drivers/usb/core/hub.c:5363 [inline]
 hub_port_connect_change root/ramdisk/work_dir/linux/drivers/usb/core/hub.c:5507 [inline]
 port_event root/ramdisk/work_dir/linux/drivers/usb/core/hub.c:5663 [inline]
 hub_event+0x219d/0x4bb0 root/ramdisk/work_dir/linux/drivers/usb/core/hub.c:5745
 process_one_work+0x9f5/0x1630 root/ramdisk/work_dir/linux/kernel/workqueue.c:2289
 worker_thread+0x679/0x10d0 root/ramdisk/work_dir/linux/kernel/workqueue.c:2436
 kthread+0x2e6/0x3a0 root/ramdisk/work_dir/linux/kernel/kthread.c:376
 ret_from_fork+0x1f/0x30 root/ramdisk/work_dir/linux/arch/x86/entry/entry_64.S:302
 </TASK>

Showing all locks held in the system:
1 lock held by khungtaskd/27:
 #0: ffffffff87a94c80 (rcu_read_lock){....}-{1:2}, at: debug_show_all_locks+0x53/0x260 root/ramdisk/work_dir/linux/kernel/locking/lockdep.c:6491
6 locks held by kworker/1:2/71:
 #0: ffff88800fb82938 ((wq_completion)usb_hub_wq){+.+.}-{0:0}, at: arch_atomic64_set root/ramdisk/work_dir/linux/./arch/x86/include/asm/atomic64_64.h:34 [inline]
 #0: ffff88800fb82938 ((wq_completion)usb_hub_wq){+.+.}-{0:0}, at: arch_atomic_long_set root/ramdisk/work_dir/linux/./include/linux/atomic/atomic-long.h:41 [inline]
 #0: ffff88800fb82938 ((wq_completion)usb_hub_wq){+.+.}-{0:0}, at: atomic_long_set root/ramdisk/work_dir/linux/./include/linux/atomic/atomic-instrumented.h:1280 [inline]
 #0: ffff88800fb82938 ((wq_completion)usb_hub_wq){+.+.}-{0:0}, at: set_work_data root/ramdisk/work_dir/linux/kernel/workqueue.c:636 [inline]
 #0: ffff88800fb82938 ((wq_completion)usb_hub_wq){+.+.}-{0:0}, at: set_work_pool_and_clear_pending root/ramdisk/work_dir/linux/kernel/workqueue.c:663 [inline]
 #0: ffff88800fb82938 ((wq_completion)usb_hub_wq){+.+.}-{0:0}, at: process_one_work+0x8d9/0x1630 root/ramdisk/work_dir/linux/kernel/workqueue.c:2260
 #1: ffffc900009d7da0 ((work_completion)(&hub->events)){+.+.}-{0:0}, at: process_one_work+0x90d/0x1630 root/ramdisk/work_dir/linux/kernel/workqueue.c:2264
 #2: ffff88800f4f7190 (&dev->mutex){....}-{3:3}, at: device_lock root/ramdisk/work_dir/linux/./include/linux/device.h:835 [inline]
 #2: ffff88800f4f7190 (&dev->mutex){....}-{3:3}, at: hub_event+0x1a7/0x4bb0 root/ramdisk/work_dir/linux/drivers/usb/core/hub.c:5691
 #3: ffff888012565190 (&dev->mutex){....}-{3:3}, at: device_lock root/ramdisk/work_dir/linux/./include/linux/device.h:835 [inline]
 #3: ffff888012565190 (&dev->mutex){....}-{3:3}, at: __device_attach+0x7f/0x530 root/ramdisk/work_dir/linux/drivers/base/dd.c:964
 #4: ffff888010394118 (&dev->mutex){....}-{3:3}, at: device_lock root/ramdisk/work_dir/linux/./include/linux/device.h:835 [inline]
 #4: ffff888010394118 (&dev->mutex){....}-{3:3}, at: __device_attach+0x7f/0x530 root/ramdisk/work_dir/linux/drivers/base/dd.c:964
 #5: ffffffff87edefe8 (reading_mutex){+.+.}-{3:3}, at: add_early_randomness+0x1a/0x170 root/ramdisk/work_dir/linux/drivers/char/hw_random/core.c:69
1 lock held by hwrng/136:
 #0: ffffffff87edefe8 (reading_mutex){+.+.}-{3:3}, at: hwrng_fillfn+0x141/0x370 root/ramdisk/work_dir/linux/drivers/char/hw_random/core.c:503
2 locks held by getty/1254:
 #0: ffff8880153b8098 (&tty->ldisc_sem){++++}-{0:0}, at: tty_ldisc_ref_wait+0x20/0x80 root/ramdisk/work_dir/linux/drivers/tty/tty_ldisc.c:244
 #1: ffffc900000532e8 (&ldata->atomic_read_lock){+.+.}-{3:3}, at: n_tty_read+0xeaf/0x1430 root/ramdisk/work_dir/linux/drivers/tty/n_tty.c:2124
3 locks held by udevd/5682:
 #0: ffff888012559488 (&of->mutex){+.+.}-{3:3}, at: kernfs_file_read_iter root/ramdisk/work_dir/linux/fs/kernfs/file.c:197 [inline]
 #0: ffff888012559488 (&of->mutex){+.+.}-{3:3}, at: kernfs_fop_read_iter+0x181/0x6c0 root/ramdisk/work_dir/linux/fs/kernfs/file.c:236
 #1: ffff88803bb4f008 (kn->active#46){++++}-{0:0}, at: kernfs_file_read_iter root/ramdisk/work_dir/linux/fs/kernfs/file.c:198 [inline]
 #1: ffff88803bb4f008 (kn->active#46){++++}-{0:0}, at: kernfs_fop_read_iter+0x1a4/0x6c0 root/ramdisk/work_dir/linux/fs/kernfs/file.c:236
 #2: ffff888012565190 (&dev->mutex){....}-{3:3}, at: device_lock_interruptible root/ramdisk/work_dir/linux/./include/linux/device.h:840 [inline]
 #2: ffff888012565190 (&dev->mutex){....}-{3:3}, at: read_descriptors+0x3c/0x2c0 root/ramdisk/work_dir/linux/drivers/usb/core/sysfs.c:873
1 lock held by syz-executor.6/31671:
 #0: ffff88806c737b58 (&rq->__lock){-.-.}-{2:2}, at: raw_spin_rq_lock_nested root/ramdisk/work_dir/linux/kernel/sched/core.c:544 [inline]
 #0: ffff88806c737b58 (&rq->__lock){-.-.}-{2:2}, at: raw_spin_rq_lock root/ramdisk/work_dir/linux/kernel/sched/sched.h:1304 [inline]
 #0: ffff88806c737b58 (&rq->__lock){-.-.}-{2:2}, at: rq_lock root/ramdisk/work_dir/linux/kernel/sched/sched.h:1602 [inline]
 #0: ffff88806c737b58 (&rq->__lock){-.-.}-{2:2}, at: __schedule+0x242/0x2620 root/ramdisk/work_dir/linux/kernel/sched/core.c:6345
1 lock held by syz-executor.3/31672:
1 lock held by syz-executor.1/31673:

=============================================

NMI backtrace for cpu 0
CPU: 0 PID: 27 Comm: khungtaskd Not tainted 5.19.0-rc1-syzkaller #0
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.16.2-debian-1.16.2-1 04/01/2014
Call Trace:
 <TASK>
 __dump_stack root/ramdisk/work_dir/linux/lib/dump_stack.c:88 [inline]
 dump_stack_lvl+0xfc/0x174 root/ramdisk/work_dir/linux/lib/dump_stack.c:106
 nmi_cpu_backtrace.cold+0x22/0x16f root/ramdisk/work_dir/linux/lib/nmi_backtrace.c:111
 nmi_trigger_cpumask_backtrace+0x1ea/0x230 root/ramdisk/work_dir/linux/lib/nmi_backtrace.c:62
 trigger_all_cpu_backtrace root/ramdisk/work_dir/linux/./include/linux/nmi.h:146 [inline]
 check_hung_uninterruptible_tasks root/ramdisk/work_dir/linux/kernel/hung_task.c:220 [inline]
 watchdog+0xcdf/0x1070 root/ramdisk/work_dir/linux/kernel/hung_task.c:378
 kthread+0x2e6/0x3a0 root/ramdisk/work_dir/linux/kernel/kthread.c:376
 ret_from_fork+0x1f/0x30 root/ramdisk/work_dir/linux/arch/x86/entry/entry_64.S:302
 </TASK>
Sending NMI from CPU 0 to CPUs 1:
NMI backtrace for cpu 1
CPU: 1 PID: 31677 Comm: syz-executor.1 Not tainted 5.19.0-rc1-syzkaller #0
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.16.2-debian-1.16.2-1 04/01/2014
RIP: 0010:rcu_lockdep_current_cpu_online root/ramdisk/work_dir/linux/kernel/rcu/tree.c:1185 [inline]
RIP: 0010:rcu_lockdep_current_cpu_online+0x47/0x140 root/ramdisk/work_dir/linux/kernel/rcu/tree.c:1177
Code: 01 c3 55 53 65 ff 05 78 1e d2 7e e8 13 3d bd 04 48 c7 c3 40 89 03 00 83 f8 07 89 c5 0f 87 e9 00 00 00 48 8d 3c ed e0 48 58 87 <48> b8 00 00 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 80 3c 02 00 0f
RSP: 0018:ffffc9000417f970 EFLAGS: 00000297
RAX: 0000000000000001 RBX: 0000000000038940 RCX: ffffffff81299821
RDX: 0000000000000001 RSI: ffffffff86623620 RDI: ffffffff875848e8
RBP: 0000000000000001 R08: 0000000000000000 R09: ffffffff88dd3097
R10: fffffbfff11ba612 R11: 0000000000000000 R12: ffff88806c7350e0
R13: ffff88806c7350e0 R14: ffff8880158c1990 R15: ffff88806c735108
FS:  0000555555f87480(0000) GS:ffff88806c700000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007fbb86a6a6cc CR3: 0000000025381000 CR4: 0000000000350ee0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
 <TASK>
 rcu_read_lock_held_common root/ramdisk/work_dir/linux/kernel/rcu/update.c:112 [inline]
 rcu_read_lock_sched_held+0x21/0x60 root/ramdisk/work_dir/linux/kernel/rcu/update.c:123
 trace_lock_release root/ramdisk/work_dir/linux/./include/trace/events/lock.h:69 [inline]
 lock_release+0x51c/0x790 root/ramdisk/work_dir/linux/kernel/locking/lockdep.c:5676
 local_lock_release root/ramdisk/work_dir/linux/./include/linux/local_lock_internal.h:38 [inline]
 idr_preload_end root/ramdisk/work_dir/linux/./include/linux/idr.h:174 [inline]
 alloc_pid+0x1d1/0xd80 root/ramdisk/work_dir/linux/kernel/pid.c:237
 copy_process+0x378a/0x6b00 root/ramdisk/work_dir/linux/kernel/fork.c:2256
 kernel_clone+0xe4/0xaa0 root/ramdisk/work_dir/linux/kernel/fork.c:2655
 __do_sys_clone3+0x1d4/0x2d0 root/ramdisk/work_dir/linux/kernel/fork.c:2947
 do_syscall_x64 root/ramdisk/work_dir/linux/arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x34/0xb0 root/ramdisk/work_dir/linux/arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x46/0xb0
RIP: 0033:0x7fbb85e3dcd9
Code: ff ff eb d2 e8 b8 62 fd ff 0f 1f 84 00 00 00 00 00 b8 ea ff ff ff 48 85 ff 74 2c 48 85 d2 74 27 49 89 c8 b8 b3 01 00 00 0f 05 <48> 85 c0 7c 18 74 01 c3 31 ed 48 83 e4 f0 4c 89 c7 ff d2 48 89 c7
RSP: 002b:00007ffc4a189588 EFLAGS: 00000202 ORIG_RAX: 00000000000001b3
RAX: ffffffffffffffda RBX: 00007fbb85de6380 RCX: 00007fbb85e3dcd9
RDX: 00007fbb85de6380 RSI: 0000000000000058 RDI: 00007ffc4a1895d0
RBP: 00007fbb851936c0 R08: 00007fbb851936c0 R09: 00007ffc4a1896b7
R10: 0000000000000008 R11: 0000000000000202 R12: ffffffffffffffb0
R13: 0000000000000006 R14: 00007ffc4a1895d0 R15: 00007ffc4a1896b8
 </TASK>
